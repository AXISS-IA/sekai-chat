<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SEKAI Radio Node v3.0</title>
    <style>
        :root {
            --bg-color: #8B4444; 
            --accent: #FFD700;
            --lcd-bg: #000000;
            --btn-dark: #1a1a1a;
            --online: #2ecc71;
        }

        body {
            background-color: var(--bg-color);
            margin: 0; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            height: 100vh; display: flex; flex-direction: column;
            color: white; overflow: hidden;
        }

        /* --- INTERFAZ SUPERIOR --- */
        .top-bar { background: #000; color: var(--accent); text-align: center; padding: 12px; font-weight: bold; font-size: 14px; position: relative; }
        
        .privacy-selectors { display: flex; justify-content: center; gap: 10px; padding: 10px; background: rgba(0,0,0,0.2); }
        .mode-btn { padding: 5px 15px; border-radius: 15px; font-size: 12px; border: 1px solid transparent; cursor: pointer; }
        .mode-btn.active { background: var(--accent); color: black; font-weight: bold; }
        .mode-btn.private-toggle { border: 1px solid var(--accent); color: var(--accent); }

        /* --- PANTALLA LCD --- */
        .lcd-container {
            background: var(--lcd-bg); margin: 10px 20px; border-radius: 35px;
            height: 110px; display: flex; flex-direction: column;
            justify-content: center; align-items: center; border: 5px solid #222;
            transition: 0.3s;
        }
        .lcd-container.private-mode { border-color: #ff4444; box-shadow: 0 0 15px rgba(255, 68, 68, 0.3); }
        #freq-display { font-size: 55px; color: var(--accent); font-family: 'Courier New', monospace; font-weight: bold; }

        /* --- LISTA DE USUARIOS (15 MAX) --- */
        .user-list-container { flex: 1; overflow-y: auto; padding: 0 20px; padding-bottom: 100px; }
        .user-list-container::-webkit-scrollbar { display: none; }

        .list-item {
            background: #A0A0A0; margin: 8px 0; padding: 10px 15px;
            border-radius: 20px; color: black; display: flex;
            align-items: center; gap: 12px; font-weight: bold; cursor: pointer;
        }

        /* PERFIL REDONDO Y GLOW */
        .profile-circle {
            width: 42px; height: 42px; border-radius: 50%;
            background: #000; border: 2px solid var(--accent);
            overflow: hidden; display: flex; justify-content: center; align-items: center;
            transition: 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .profile-circle img, .profile-circle video { width: 100%; height: 100%; object-fit: cover; }
        .speaking { box-shadow: 0 0 20px var(--accent), 0 0 30px var(--accent); transform: scale(1.1); border-color: white; }

        /* --- PANELES FLOTANTES (INVITE, CHAT, CONFIG) --- */
        .full-panel {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--bg-color); display: none; flex-direction: column; z-index: 5000;
        }
        .panel-header { background: #000; padding: 15px; display: flex; align-items: center; gap: 15px; border-bottom: 2px solid var(--accent); }

        /* --- MEN√ö INFERIOR --- */
        nav { background: #000; height: 75px; display: flex; justify-content: space-around; align-items: center; position: fixed; bottom: 0; width: 100%; z-index: 1000; }
        .nav-icon { text-align: center; color: #777; font-size: 11px; cursor: pointer; }
        .nav-icon.active { color: var(--accent); }

        /* BOT√ìN PTT */
        .mic-area { position: fixed; bottom: 90px; width: 100%; display: flex; justify-content: center; pointer-events: none; }
        #ptt-btn {
            width: 80px; height: 80px; background: var(--accent); border-radius: 50%;
            border: 4px solid white; display: flex; justify-content: center; align-items: center;
            pointer-events: auto; user-select: none; -webkit-tap-highlight-color: transparent;
            box-shadow: 0 5px 15px rgba(0,0,0,0.4);
        }

        /* CHAT BUBBLES */
        .chat-content { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 10px; }
        .bubble { max-width: 80%; padding: 12px; border-radius: 15px; font-size: 14px; }
        .bubble.me { background: var(--accent); color: black; align-self: flex-end; border-bottom-right-radius: 2px; }
        .bubble.them { background: #333; color: white; align-self: flex-start; border-bottom-left-radius: 2px; }
        .invite-card { background: #000; color: var(--accent); padding: 10px; border-radius: 10px; margin-top: 5px; text-align: center; border: 1px solid var(--accent); cursor: pointer; }

    </style>
</head>
<body>

    <div class="top-bar">Tired of ADS ‚ùì</div>

    <div class="privacy-selectors">
        <div class="mode-btn active">Public</div>
        <div class="mode-btn">Duo</div>
        <div class="mode-btn private-toggle" id="btn-private" onclick="togglePrivate()">Private</div>
    </div>

    <div class="lcd-container" id="lcd-box">
        <div id="status-label" style="font-size: 10px; color: #555;">CHANNEL ACTIVE</div>
        <div id="freq-display">64.45</div>
        <div id="user-counter" style="color: #444; font-size: 12px;">1 / 15 Residents</div>
    </div>

    <div class="user-list-container" id="main-list">
        <div class="list-item" style="background: #ccc;" onclick="openFriends()">
            <span style="color:var(--accent); font-size:22px;">Ôºã</span> Invite Friends
        </div>
        <div id="flow-users">
            </div>
    </div>

    <div class="mic-area">
        <div id="ptt-btn" onmousedown="startTalk()" onmouseup="stopTalk()" ontouchstart="startTalk()" ontouchend="stopTalk()">
            <span id="mic-icon" style="font-size:30px;">üîá</span>
        </div>
    </div>

    <nav>
        <div class="nav-icon" onclick="openFriends()">üë•<br>Friends</div>
        <div class="nav-icon">üí¨<br>Chat</div>
        <div style="width:70px;"></div>
        <div class="nav-icon">üõí<br>Shop</div>
        <div class="nav-icon" onclick="openConfig()">üë§<br>Profile</div>
    </nav>

    <div id="panel-friends" class="full-panel">
        <div class="panel-header">
            <span onclick="closePanels()" style="font-size:25px; cursor:pointer;">‚Üê</span>
            <span>Mis Amigos</span>
        </div>
        <div style="padding: 20px;" id="friends-list-content">
            </div>
    </div>

    <div id="panel-chat" class="full-panel">
        <div class="panel-header">
            <span onclick="openFriends()" style="font-size:25px; cursor:pointer;">‚Üê</span>
            <div class="profile-circle" style="width:30px; height:30px;" id="chat-header-avatar">üë§</div>
            <span id="chat-header-name">Usuario</span>
        </div>
        <div class="chat-content" id="chat-msgs"></div>
        <div style="background:#000; padding:15px; display:flex; gap:10px;">
            <button onclick="sendTransportInvite()" style="background:none; border:none; font-size:20px;">üöÄ</button>
            <input type="text" id="chat-input" style="flex:1; background:#222; border:none; border-radius:20px; padding:10px; color:white;" placeholder="Escribe...">
            <button onclick="sendMsg()" style="background:var(--accent); border:none; width:40px; border-radius:20px;">></button>
        </div>
    </div>

    <div id="panel-config" class="full-panel" style="justify-content: center; align-items: center;">
        <h2 style="color:var(--accent)">Ajustes de Perfil</h2>
        <input type="file" id="upload-media" accept="image/*,video/*" style="display:none">
        <button onclick="document.getElementById('upload-media').click()" style="padding:15px; border-radius:10px; background:white; border:none; font-weight:bold;">Cambiar Foto/Video</button>
        
        <p>Color de Radio:</p>
        <input type="color" oninput="updateTheme(this.value, 'bg')" value="#8B4444">
        <p>Color de Acento:</p>
        <input type="color" oninput="updateTheme(this.value, 'acc')" value="#FFD700">
        
        <button onclick="closePanels()" style="margin-top:40px; background:black; color:white; padding:10px 30px; border-radius:20px; border:1px solid white;">Cerrar</button>
    </div>

    <script>
        let myName = "FunnyWhiffor";
        let isPrivate = false;
        let currentFreq = "64.45";
        let friends = [
            { name: "Cyber_Girl", online: true, avatar: "üéß" },
            { name: "Alex_Radio", online: true, avatar: "üë§" },
            { name: "Ghost_Node", online: false, avatar: "üë§" }
        ];

        // --- INICIALIZACI√ìN ---
        function init() {
            renderMainList();
        }

        function renderMainList() {
            const container = document.getElementById('flow-users');
            container.innerHTML = "";
            // Simulaci√≥n de orden de llegada (T√∫ eres el 2do en llegar)
            const arrivals = ["User_Alpha", myName, "Delta_9", "Echo_Rider"];
            arrivals.forEach(name => {
                const div = document.createElement('div');
                div.className = 'list-item';
                div.onclick = () => { if(name !== myName) openActionMenu(name); };
                div.innerHTML = `
                    <div class="profile-circle" id="${name === myName ? 'my-avatar' : ''}">
                        ${name === myName ? 'üè†' : 'üë§'}
                    </div>
                    <span>${name}</span>
                `;
                container.appendChild(div);
            });
            document.getElementById('user-counter').innerText = `${arrivals.length} / 15 Residents`;
        }

        // --- PTT & GLOW ---
        function startTalk() {
            const avatar = document.getElementById('my-avatar');
            if(avatar) avatar.classList.add('speaking');
            document.getElementById('freq-display').style.color = "#ff4444";
            document.getElementById('status-label').innerText = "TRANSMITTING...";
            document.getElementById('mic-icon').innerText = "üéôÔ∏è";
            if(navigator.vibrate) navigator.vibrate(50);
        }

        function stopTalk() {
            const avatar = document.getElementById('my-avatar');
            if(avatar) avatar.classList.remove('speaking');
            document.getElementById('freq-display').style.color = "var(--accent)";
            document.getElementById('status-label').innerText = "CHANNEL ACTIVE";
            document.getElementById('mic-icon').innerText = "üîá";
        }

        // --- PRIVACIDAD ---
        function togglePrivate() {
            isPrivate = !isPrivate;
            const btn = document.getElementById('btn-private');
            const lcd = document.getElementById('lcd-box');
            if(isPrivate) {
                btn.classList.add('active');
                lcd.classList.add('private-mode');
            } else {
                btn.classList.remove('active');
                lcd.classList.remove('private-mode');
            }
        }

        // --- GESTI√ìN DE PANELES ---
        function openFriends() {
            closePanels();
            document.getElementById('panel-friends').style.display = 'flex';
            const content = document.getElementById('friends-list-content');
            content.innerHTML = "";
            friends.forEach(f => {
                content.innerHTML += `
                    <div class="list-item" style="background:${f.online ? '#A0A0A0':'#444'}" onclick="openChat('${f.name}')">
                        <div class="profile-circle">${f.avatar}</div>
                        <span>${f.name}</span>
                        <span style="margin-left:auto; font-size:10px;">${f.online ? 'ON':'OFF'}</span>
                    </div>
                `;
            });
        }

        function openChat(name) {
            closePanels();
            document.getElementById('chat-header-name').innerText = name;
            document.getElementById('panel-chat').style.display = 'flex';
        }

        function openConfig() {
            closePanels();
            document.getElementById('panel-config').style.display = 'flex';
        }

        function closePanels() {
            document.querySelectorAll('.full-panel').forEach(p => p.style.display = 'none');
        }

        // --- FUNCIONES DE CHAT ---
        function sendMsg() {
            const val = document.getElementById('chat-input').value;
            if(!val) return;
            const b = document.createElement('div');
            b.className = 'bubble me';
            b.innerText = val;
            document.getElementById('chat-msgs').appendChild(b);
            document.getElementById('chat-input').value = "";
        }

        function sendTransportInvite() {
            const b = document.createElement('div');
            b.className = 'bubble me';
            b.innerHTML = `Te invito a mi sala:<div class="invite-card">UNIRSE A ${currentFreq}</div>`;
            document.getElementById('chat-msgs').appendChild(b);
        }

        function updateTheme(val, type) {
            if(type === 'bg') document.documentElement.style.setProperty('--bg-color', val);
            if(type === 'acc') document.documentElement.style.setProperty('--accent', val);
        }

        init();
    </script>
</body>
</html>
